'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.assertLoggedIn = assertLoggedIn;
exports.assertSpaceIdProvided = assertSpaceIdProvided;

var _context = require('../context');

var _error = require('./error');

var _styles = require('./styles');

async function assertLoggedIn({ managementToken, paramName } = {}) {
  let noToken = !managementToken;
  if (!managementToken) {
    const context = await (0, _context.getContext)();
    noToken = !context.managementToken;
  }
  paramName = paramName || '--management-Token';
  if (noToken) {
    throw new _error.PreconditionFailedError(`You have to be logged in to do this.\nYou can log in via ${(0, _styles.highlightStyle)('contentful login')}\nOr provide a managementToken via ${paramName} argument`);
  }
}

async function assertSpaceIdProvided({ spaceId, activeSpaceId } = {}) {
  let noSpaceId = !spaceId && !activeSpaceId;
  if (noSpaceId) {
    const context = await (0, _context.getContext)();
    noSpaceId = !context.activeSpaceId;
  }
  if (noSpaceId) {
    throw new _error.PreconditionFailedError(`You need to provide a space id. You can pass it via the ${(0, _styles.highlightStyle)('--space-id')} parameter or by running ${(0, _styles.highlightStyle)('contentful space use')}`);
  }
}