'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.handler = exports.desc = exports.command = undefined;
exports.logout = logout;

var _context = require('../context');

var _actions = require('../utils/actions');

var _async = require('../utils/async');

var _log = require('../utils/log');

const command = exports.command = 'logout';

const desc = exports.desc = 'Logout from Contentful';

async function logout() {
  (0, _log.warning)('This will log you out by deleting the CMA token stored on your system.');
  const confirmed = await (0, _actions.confirmation)('Do you want to log out now?');

  if (!confirmed) {
    (0, _log.log)('Log out aborted by user.');
    return;
  }
  await (0, _context.setContext)({ managementToken: null });
  await (0, _context.storeRuntimeConfig)();

  (0, _log.success)('Successfully logged you out.');
}

const handler = exports.handler = (0, _async.handleAsyncError)(logout);